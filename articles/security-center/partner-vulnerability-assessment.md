---
title: Escáneres de vulnerabilidades de asociados en Azure Security Center
description: Azure Security Center admite la integración de soluciones de evaluación de vulnerabilidades de terceros. En este artículo se describe cómo configurar esas herramientas.
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.service: security-center
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 12/13/2019
ms.author: memildin
ms.openlocfilehash: ac68e5a91f72954ce54892f22ab5ba3a7a593bbf
ms.sourcegitcommit: 50ef5c2798da04cf746181fbfa3253fca366feaa
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/30/2020
ms.locfileid: "82611439"
---
# <a name="deploying-a-partner-vulnerability-scanning-solution"></a>Implementación de una solución de examen de vulnerabilidades de asociados

Si su nivel es el estándar, puede usar la herramienta de evaluación de vulnerabilidades integrada de Azure Security Center, tal y como se describe en [Detector de vulnerabilidades integrado para máquinas virtuales](built-in-vulnerability-assessment.md). Esta herramienta no requiere ninguna licencia ni cuenta de Qualys, ya que todo se administra sin problemas en Security Center.

Como alternativa, es posible que quiera implementar su propia solución de evaluación de vulnerabilidades con licencia privada de [Qualys](https://www.qualys.com/lp/azure) o [Rapid7](https://www.rapid7.com/products/insightvm/). Puede instalar una de estas soluciones de asociados en varias máquinas virtuales que pertenezcan a la misma suscripción.

## <a name="configuring-a-partner-solution-in-the-azure-portal"></a>Configuración de una solución de asociado (en Azure Portal)

1. En el panel de **Security Center**, en la sección **Introducción** haga clic en **Recomendaciones**.

1. En la página **Recomendaciones**, seleccione **La solución de evaluación de vulnerabilidades debe instalarse en sus máquinas virtuales**.

    ![Evaluación de vulnerabilidades](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig1-new.png)

1. En la página **La solución de evaluación de vulnerabilidades debe instalarse en sus máquinas virtuales**, seleccione las VM en las que quiere instalar la solución de evaluación de vulnerabilidades.

    ![Adición de una solución de evaluación de vulnerabilidades](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig2-new.png)

1. En la página **La solución de evaluación de vulnerabilidades debe instalarse en sus máquinas virtuales**, haga clic en **Instalar en 2 VM** (el nombre puede variar según el número de VM que haya seleccionado):

    ![Adición de una evaluación de vulnerabilidades](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig3-new.png)

1. Puede crear una nueva solución de evaluación de vulnerabilidades o usar una solución existente. Si crea una nueva solución de evaluación de vulnerabilidades, puede seleccionar una solución de asociado en **Azure Marketplace**. O bien, en **Usar solución existente**, seleccione **Qualys** o **Rapid7**.

    Para implementar el agente desde Security Center, se necesita un código de licencia y una clave pública del proveedor. Consulte la [documentación de Qualys](https://community.qualys.com/docs/DOC-5823-deploying-qualys-cloud-agents-from-microsoft-azure-security-center) o la [documentación de Rapid7](https://insightvm.help.rapid7.com/docs/azure-security-center) para obtener información acerca de cómo obtener el código de licencia y la clave pública.


1. Para crear una nueva evaluación, haga clic en **Crear nueva**. Se abrirá la página de **administración de vulnerabilidades** del asociado. Las opciones mostradas en esta página pueden cambiar según el asociado.

    ![Creación de una nueva solución de evaluación de vulnerabilidades](./media/security-center-vulnerability-assessment-recommendations/security-center-vulnerability-assessment-fig4-new.png)

    Para configurar Qualys (por ejemplo), seleccione **Qualys** y después:
    
    1. En **Grupo de recursos**, seleccione **Usar existente**.
    
    1. En **Ubicación**, seleccione el lugar en el que la solución se encuentra geográficamente localizada.
    
    1. En el cuadro **License code** (Código de licencia) (es específico de Qualys), escriba la clave de licencia que proporciona el asociado.
    
    1. En el cuadro **Public key** (Clave pública) (es específico de Qualys), escriba la información de la clave pública que proporciona el asociado.
    
    1. Para instalar automáticamente un agente de evaluación de vulnerabilidades en todas las VM detectadas en la suscripción de esta solución Qualys, seleccione la casilla **Actualización automática**.
    
    1. Haga clic en **OK**.


## <a name="configuring-a-partner-solution-using-powershell-and-the-rest-api"></a>Configuración de una solución de asociado (mediante PowerShell y la API REST)

Para implementar mediante programación su propia solución de valoración de vulnerabilidades con licencia privada desde [Qualys](https://www.qualys.com/lp/azure) o [Rapid7](https://www.rapid7.com/products/insightvm/), use el script proporcionado [PowerShell > Solución de vulnerabilidad](https://github.com/Azure/Azure-Security-Center/tree/master/Powershell%20scripts/Vulnerability%20Solution). 

Este script usa la API REST para crear una nueva solución de seguridad en ASC. La solución requiere una licencia y una clave proporcionadas por el proveedor de servicios: Qualys o Rapid7.

> [!IMPORTANT] 
> Solo se puede crear una solución por licencia. Se producirá un error al intentar crear otra solución con el mismo nombre, licencia o clave.

### <a name="prerequisites"></a>Prerrequisitos

Módulos de PowerShell necesarios:

- Install-module Az
- Install-module Az.security

### <a name="running-the-script"></a>Ejecutar el script

Para ejecutar el script, necesitará la información pertinente para los parámetros siguientes.

| **Parámetro** | **Obligatorio** | **Notas** |
|----|:----:|----|
|**SubscriptionId**|✔|Valor de subscriptionID de la suscripción de Azure que contiene los recursos que quiere analizar.|
|**ResourceGroupName**|✔|Nombre del grupo de recursos. Use cualquier grupo de recursos existente que incluya el valor predeterminado ("DefaultResourceGroup-xxx"). Dado que la solución no es un recurso de Azure, no aparecerá en el grupo de recursos, pero está conectada a este.|
|**vaSolutionName**|✔|Nombre de la nueva solución.|
|**vaType**|✔|Qualys o Rapid7.|
|**licenceCode**|✔|Cadena de licencia proporcionada por el proveedor.|
|**publicKey**|✔|Clave pública proporcionada por el proveedor.|
|**autoUpdate**|-|Habilite (true) o deshabilite (false) la implementación automática para esta solución de VA. Cuando está habilitada, todas las VM nuevas de la suscripción intentarán vincularse automáticamente a la solución.<br/>(Valor predeterminado: False)|


Sintaxis:

```
.\New-ASCVASolution.ps1 -subscriptionId <Subscription Id> -resourceGroupName <RG Name>
-vaSolutionName <New solution name> -vaType <Qualys / Rapid7> -autoUpdate <true/false>
-licenceCode <License code from vendor> -publicKey <Public Key received from vendor>
```

Ejemplo (en este ejemplo no se incluyen detalles de licencia válidos):

```
.\New-ASCVASolution.ps1 -subscriptionId 'f4cx1b69-dtgb-4ch6-6y6f-ea2e95373d3b' -resourceGroupName 'DefaultResourceGroup-WEU' -vaSolutionName 'QualysVa001' -vaType 'Qualys' -autoUpdate 'false' `
-licenceCode 'eyJjaWQiOiJkZDg5OTYzXe4iMTMzLWM4NTAtODM5FD2mZWM1N2Q3ZGU5MjgiLCJgbTYuOiIyMmM5NDg3MS1lNTVkLTQ1OGItYjhlMC03OTRhMmM3YWM1ZGQiLCJwd3NVcmwiOiJodHRwczovL3FhZ3B1YmxpYy1wMDEuaW50LnF1YWx5cy5jb20vQ2xvdSKJY6VudC8iLCJwd3NQb3J0IjoiNDQzIn0=' `
-publicKey 'MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCOiOLXjOywMfLZIBGPZLwSocf1Q64GASLK9OHFEmanBl1nkJhZDrZ4YD5lM98fThYbAx1Rde2iYV1ze/wDlX4cIvFAyXuN7HbdkeIlBl6vWXEBZpUU17bOdJOUGolzEzNBhtxi/elEZLghq9Chmah82me/okGMIhJJsCiTtglVQIDAQAB'
```


## <a name="review-the-recommendation"></a>Revisión de la recomendación
Una vez instalada la solución de evaluación de vulnerabilidades en la VM de destino, Security Center examina la VM para detectar e identificar las vulnerabilidades en el sistema y en la aplicación.

> [!NOTE]
> El primer examen puede tardar un par de horas en completarse. Los siguientes tardarán una hora.

Los problemas detectados se muestran en la opción **Recomendaciones de máquinas virtuales**.

## <a name="next-steps"></a>Pasos siguientes

En este artículo se describe la herramienta de evaluación de vulnerabilidades integrada basada en Qualys para examinar las VM. Para obtener material relacionado, vea los siguientes artículos:

- [Más información sobre los distintos elementos de una recomendación](security-center-recommendations.md)
- [Recomendaciones de corrección](security-center-remediate-recommendations.md)